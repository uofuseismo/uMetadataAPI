syntax = "proto3";
import "proto/v1/station.proto";

package UMetadata.GRPC;

/// A node in a telemetry graph can be a station or a relay.
message RelayNode
{
    string name = 1;
    double latitude = 2;
    double longitude = 3;
}

/// Defines the nature of communication between two nodes.
enum Link
{
    Unknown = 0; /// It's unknown how the data moves along the graph edge.
    IP = 1;      /// Data over internet protocol (IP).
    Radio = 2;   /// Data moves via radio link.
    Cell = 3;    /// Data moves via cell model.
}   

message StationRelayNodeEdge
{
    int32 station_index = 1;    /// The index of the station in the graph.  This is C-based numbering.
    int32 relay_node_index = 2; /// The index of the relay node in the graph.  This is C-based numbering.
    optional Link link = 3;   /// The mechanism by which the station sends data to the realy.
}

message Graph
{
    repeated StationRelayNodeEdge station_relay_node_edges = 1;
    repeated Station stations = 2;
    repeated RelayNode relay_nodes = 3;
}

message Telemetry
{
    repeated Graph graphs = 1;
}
